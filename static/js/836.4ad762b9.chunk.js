"use strict";(self.webpackChunkexploring=self.webpackChunkexploring||[]).push([[836],{836:(e,a,r)=>{r.r(a),r.d(a,{default:()=>m});var n=r(43),t=r(532),i=r(937),s=r(105),l=r(579);const o=e=>{let{onClose:a}=e;const{favorites:r,removeFavorite:n}=(0,s.rB)();return(0,l.jsx)("div",{className:"modal-overlay",role:"dialog","aria-modal":"true","aria-labelledby":"favorites-title",children:(0,l.jsxs)("div",{className:"modal",children:[(0,l.jsx)("h2",{id:"favorites-title",children:"Your Exploring Wishlist"}),0===r.length?(0,l.jsx)("p",{children:"No favorites yet."}):(0,l.jsx)("ul",{children:r.map((e=>(0,l.jsxs)("li",{children:["".concat(e.name.common,"     "),(0,l.jsx)("button",{onClick:()=>n(e.cca3),"aria-label":"Remove ".concat(e.name.common," from favorites"),children:"\u274c"})]},e.cca3)))}),(0,l.jsx)("button",{className:"modal-close",onClick:a,"aria-label":"Close favorites modal",children:"x"})]})})},c=e=>{let{setQuery:a,query:r}=e;const[t,i]=(0,n.useState)(!1);return(0,l.jsxs)("header",{className:"home-nav-bar",role:"banner",children:[(0,l.jsx)("button",{className:"view-favorites",onClick:()=>i(!0),children:"View Favorites"}),t&&(0,l.jsx)(o,{onClose:()=>i(!1)}),(0,l.jsx)("h1",{className:"title",children:"Exploring"}),(0,l.jsx)("label",{htmlFor:"country-search",className:"visually-hidden",children:"Search for a country"}),(0,l.jsx)("input",{id:"country-search",className:"search",type:"text",placeholder:"Search countries...",value:r,onChange:e=>a(e.target.value),"aria-label":"Search countries"})]})},d=e=>{let{currentPage:a,setCurrentPage:r,amtCountriesPerPage:n,filteredCountries:t}=e;const i=Math.ceil(t.length/n);return(0,l.jsxs)("nav",{className:"pagination",role:"navigation","aria-label":"Country pagination",children:[(0,l.jsx)("button",{onClick:()=>r(a-1),disabled:1===a,"aria-label":"Go to previous page",children:"Previous"}),(0,l.jsxs)("span",{"aria-live":"polite",children:["Page ",(0,l.jsx)("strong",{children:a})," of ",(0,l.jsx)("strong",{children:i})]}),(0,l.jsx)("button",{onClick:()=>r(a+1),disabled:a===i,"aria-label":"Go to next page",children:"Next"})]})};var u=r(817);const h=(0,n.lazy)((()=>r.e(805).then(r.bind(r,805)))),m=()=>{const{data:e,isLoading:a,error:r}=(0,t.I)({queryKey:["countries"],queryFn:i.S}),[s,o]=(0,n.useState)(""),[m,x]=(0,n.useState)(1),j=(0,n.useMemo)((()=>{if(!e)return[];const a=e.sort(((e,a)=>e.name.common.localeCompare(a.name.common)));return s?a.filter((e=>e.name.common.toLowerCase().includes(s.trim().toLowerCase()))):a}),[e,s]);if((0,n.useEffect)((()=>{x(1)}),[s]),a||!e)return(0,l.jsx)("p",{children:"Loading..."});if(r)return(0,l.jsx)("p",{children:"Error loading countries."});return(0,l.jsxs)("main",{className:"home-div",children:[(0,l.jsxs)("section",{"aria-labelledby":"filter-heading",children:[(0,l.jsx)("h2",{id:"filter-heading",className:"visually-hidden",children:"Filter countries"}),(0,l.jsx)(u.A,{children:(0,l.jsx)(c,{query:s,setQuery:e=>{o(e)}})})]}),(0,l.jsx)("section",{"aria-labelledby":"countries-heading",className:"main-content",children:(0,l.jsx)(n.Suspense,{fallback:(0,l.jsx)("p",{"aria-live":"polite",children:"Loading countries..."}),children:(0,l.jsx)(u.A,{children:(0,l.jsx)(h,{filteredCountries:j,currentPage:m,amtCountriesPerPage:12})})})}),(0,l.jsx)("nav",{"aria-label":"Pagination navigation",children:(0,l.jsx)(u.A,{children:(0,l.jsx)(d,{amtCountriesPerPage:12,currentPage:m,setCurrentPage:x,filteredCountries:j})})})]})}},937:(e,a,r)=>{r.d(a,{S:()=>t,d:()=>i});const n="https://restcountries.com/v3.1",t=async()=>{const e=await fetch("".concat(n,"/all"));if(!e.ok)throw new Error("Unable to fetch countries");return await e.json()},i=async e=>{const a=await fetch("".concat(n,"/alpha/").concat(e));if(!a.ok)throw new Error("Unable to fetch country");return(await a.json())[0]}}}]);
//# sourceMappingURL=836.4ad762b9.chunk.js.map